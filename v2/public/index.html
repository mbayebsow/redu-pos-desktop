<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redu POS</title>
    <link rel="stylesheet" href="css/tailwind.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <script src="js/airtable/build/airtable.browser.js"></script>
    <script src="js/localdb.js"></script>
    <script src="js/moment.min.js"></script>
    <script src="js/moment-with-locales.js"></script>
    <script src="js/script.js"></script>
    <script src="js/alpine.min.js"></script>
  </head>
  <body class="bg-blue-gray-50" x-data="initApp()" x-init="loadProducts()">
    <div class="hide-print flex flex-row h-screen antialiased text-blue-gray-900">
      <div class="flex-grow flex">
        <div class="flex flex-col h-full w-full">
          <div id="AppHeader" class="relative h-12 p-3 bg-white shadow">
            <div class="h-full flex font-bold flex-row relative gap-3">
              <a href="windows/Produits/Produits.html" class="rounded-md flex flex-row justify-center items-center bg-green-500 text-white">
                <div class="text-xs px-2 font-semibold">Produits</div>
                <div class="h-full bg-blue-gray-900 w-7 px-2 text-white rounded-md">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-full w-full" fill="white" viewBox="0 0 24 24">
                    <path
                      d="M11.499 12.03v11.971l-10.5-5.603v-11.835l10.5 5.467zm11.501 6.368l-10.501 5.602v-11.968l10.501-5.404v11.77zm-16.889-15.186l10.609 5.524-4.719 2.428-10.473-5.453 4.583-2.499zm16.362 2.563l-4.664 2.4-10.641-5.54 4.831-2.635 10.474 5.775z"
                    />
                  </svg>
                </div>
              </a>
              <a href="windows/Ventes/Ventes.html" class="rounded-md flex flex-row justify-center items-center bg-blue-600 text-white">
                <div class="text-xs px-2 font-semibold">Ventes</div>
                <div class="h-full bg-blue-gray-900 w-7 px-2 text-white rounded-md">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-full w-full" fill="white" viewBox="0 0 24 24">
                    <path
                      d="M18.799 7.038c-.496-.535-.799-1.252-.799-2.038 0-1.656 1.344-3 3-3s3 1.344 3 3-1.344 3-3 3c-.146 0-.29-.01-.431-.031l-3.333 6.032c.475.53.764 1.231.764 1.999 0 1.656-1.344 3-3 3s-3-1.344-3-3c0-.583.167-1.127.455-1.587l-2.565-3.547c-.281.087-.58.134-.89.134l-.368-.022-3.355 6.069c.451.525.723 1.208.723 1.953 0 1.656-1.344 3-3 3s-3-1.344-3-3 1.344-3 3-3c.186 0 .367.017.543.049l3.298-5.967c-.52-.539-.841-1.273-.841-2.082 0-1.656 1.344-3 3-3s3 1.344 3 3c0 .617-.187 1.191-.507 1.669l2.527 3.495c.307-.106.637-.164.98-.164.164 0 .325.013.482.039l3.317-6.001zm-3.799 7.962c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1zm-6-8c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1z"
                    />
                  </svg>
                </div>
              </a>
              <a href="windows/Clients/Clients.html" class="rounded-md flex flex-row justify-center items-center bg-pink-500 text-white">
                <div class="text-xs px-2 font-semibold">Clients</div>
                <div class="h-full bg-blue-gray-900 w-7 px-2 text-white rounded-md">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-full w-full" fill="white" viewBox="0 0 24 24">
                    <path
                      d="M20.822 18.096c-3.439-.794-6.64-1.49-5.09-4.418 4.72-8.912 1.251-13.678-3.732-13.678-5.082 0-8.464 4.949-3.732 13.678 1.597 2.945-1.725 3.641-5.09 4.418-3.073.71-3.188 2.236-3.178 4.904l.004 1h23.99l.004-.969c.012-2.688-.092-4.222-3.176-4.935z"
                    />
                  </svg>
                </div>
              </a>
              <input type="text" class="bg-blue-gray-50 rounded-md text-sm w-full p-2 transition-shadow focus:shadow-2xl focus:outline-none" placeholder="Recherche" x-model="keyword" />
              <button id="shutDownBtn" class="hidden flex flex-row justify-center items-center bg-yellow-500 text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-full w-7 px-2 text-white bg-red-500" fill="white" viewBox="0 0 24 24">
                  <path
                    d="M14 12h-4v-12h4v12zm4.213-10.246l-1.213 1.599c2.984 1.732 5 4.955 5 8.647 0 5.514-4.486 10-10 10s-10-4.486-10-10c0-3.692 2.016-6.915 5-8.647l-1.213-1.599c-3.465 2.103-5.787 5.897-5.787 10.246 0 6.627 5.373 12 12 12s12-5.373 12-12c0-4.349-2.322-8.143-5.787-10.246z"
                  />
                </svg>
              </button>
            </div>
          </div>

          <div class="flex-row p-3 flex gap-2 h-full w-full overflow-hidden">
            <!-- store menu -->
            <div class="w-1/2 h-full overflow-hidden">
              <div class="h-full overflow-y-auto rounded-md">
                <div class="select-none flex flex-wrap content-center justify-center h-full opacity-25" x-show="products.length === 0">
                  <div class="w-full text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"
                      />
                    </svg>
                    <p class="text-xl">PAS DE PRODUIT TROUVER</p>
                  </div>
                </div>
                <div class="select-none flex flex-wrap content-center justify-center h-full opacity-25" x-show="filteredProducts().length === 0 && keyword.length > 0">
                  <div class="w-full text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    <p class="text-xl">
                      AUCUN RESULTAT POUR
                      <br />
                      "<span x-text="keyword" class="font-semibold"></span>"
                    </p>
                  </div>
                </div>
                <div x-show="filteredProducts().length" class="grid grid-cols-5 gap-2 pb-1">
                  <template x-for="product in filteredProducts()" :key="product._id">
                    <div
                      :id="product._id"
                      role="button"
                      class="h-40 rounded-md productItem select-none cursor-pointer transition-shadow overflow-hidden bg-white shadow hover:shadow-lg"
                      :title="product.name"
                      x-on:click="addToCart(product)"
                    >
                      <img :src="getProductImage(product.image)" :alt="product.name" class="h-2/3 w-full" />
                      <div class="p-2">
                        <p class="flex-grow truncate mr-1 text-xs" x-text="product.name"></p>
                        <p class="nowrap font-semibold text-sm" x-text="priceFormat(product.price)"></p>
                      </div>
                    </div>
                  </template>
                </div>
              </div>
            </div>
            <!-- PANIER -->
            <div class="rounded-md w-1/4 flex flex-col h-full bg-white shadow overflow-hidden">
              <div class="h-16 text-center flex justify-center border-b mb-3">
                <div class="pl-8 text-left text-lg py-4 relative">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                  <div x-show="getItemsCount() > 0" class="text-center absolute bg-red-600 text-white w-5 h-5 text-xs p-0 leading-5 -right-2 top-3" x-text="getItemsCount()"></div>
                </div>
                <div class="flex-grow px-8 text-right text-lg py-4 relative">
                  <button x-on:click="clear()" class="text-blue-gray-300 hover:text-pink-500 focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                      />
                    </svg>
                  </button>
                </div>
              </div>
              <div class="flex-1 flex flex-col overflow-auto">
                <div x-show="cart.length === 0" class="flex-1 w-full p-4 opacity-25 select-none flex flex-col flex-wrap content-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-16 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
                    />
                  </svg>
                  <p>PANIER VIDE</p>
                </div>
                <div class="flex-1 w-full px-2 overflow-auto">
                  <template x-for="item in cart" :key="item.productId">
                    <div class="rounded-md select-none w-full text-blue-gray-700 flex justify-center py-1 px-1 shadow mb-2">
                      <img :src="item.image" alt="" class="h-10 w-10 bg-white mr-1" />
                      <div class="flex-grow">
                        <h5 class="text-xs text-blue-gray-900" x-text="item.name"></h5>
                        <p class="text-sm block text-blue-gray-900" x-text="priceFormat(item.price)"></p>
                      </div>
                      <div class="py-1" x-show="!item.demiPrice">
                        <div class="w-20 grid grid-cols-3">
                          <button x-on:click="addQty(item, -1)" class="rounded-md text-center py-1 text-white bg-blue-gray-900">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-3 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
                            </svg>
                          </button>
                          <input x-model.number="item.qty" type="text" class="rounded-md mx-1 bg-blue-gray-50 text-center focus:outline-none focus:shadow-lg text-sm" />
                          <button x-on:click="addQty(item, 1)" class="rounded-md text-center py-1 text-white bg-blue-gray-900">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-3 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                          </button>
                        </div>
                      </div>
                    </div>
                  </template>
                </div>
              </div>
              <div class="text-left text-white bg-blue-gray-700 p-2 leading-3 w-full h-17">
                <div class="w-full border-b mb-2">
                  <div class="text-xs">TOTAL</div>
                  <div class="text-lg font-bold -mt-1" x-text="priceFormat(getTotalPrice())"></div>
                </div>
                <div class="text-xs flex flex-row">
                  <p>Client:</p>
                  <div x-show="clientCart.length > 0">
                    <template x-for="(item, index) in clientCart" :key="item.Nom">
                      <div class="flex flex-row font-semibold">
                        <p class="mx-1" x-text="item.Prenom+' '+item.Nom"></p>
                        <p>•</p>
                        <p class="mx-1" x-text="item.Telephone"></p>
                        <p>•</p>
                        <p class="mx-1" x-text="item.Adresse"></p>
                      </div>
                    </template>
                  </div>
                </div>
              </div>
            </div>
            <!-- right sidebar -->
            <div class="shadow rounded-md w-1/4 flex flex-col h-full bg-white overflow-hidden">
              <div class="flex flex-col h-full p-2 overflow-auto">
                <div class="text-sm font-bold">Clients</div>
                <hr class="my-2" />
                <div class="flex flex-col overflow-auto">
                  <div class="gap-1 grid grid-cols-2">
                    <template x-for="(item, index) in clients" :key="item._id">
                      <div class="bg-blue-gray-50 p-2 rounded-md" role="button" x-on:click="addClientCart(item)">
                        <p class="text-xs font-bold" x-text="item.Prenom+' '+item.Nom"></p>
                        <p class="text-xs" x-text="item.Telephone"></p>
                      </div>
                    </template>
                  </div>
                </div>
              </div>
              <!-- payment info -->
              <div class="m-2 rounded-md text-blue-gray-700 p-2 h-auto w-auto text-center bg-blue-gray-500">
                <input
                  placeholder="ACCOMPTE"
                  x-bind:value="numberFormat(cash)"
                  x-on:keyup="updateCash($event.target.value)"
                  type="text"
                  class="rounded-md text-right text-blue-gray-900 bg-blue-gray-50 focus:shadow-lg px-2 focus:outline-none w-full font-semibold h-10"
                />
                <hr class="my-2" />
                <div class="grid grid-cols-3 gap-1 pb-1">
                  <button
                    x-on:click="addCashNumber('1')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    1
                  </button>
                  <button
                    x-on:click="addCashNumber('2')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    2
                  </button>
                  <button
                    x-on:click="addCashNumber('3')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    3
                  </button>
                  <button
                    x-on:click="addCashNumber('4')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    4
                  </button>
                  <button
                    x-on:click="addCashNumber('5')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    5
                  </button>
                  <button
                    x-on:click="addCashNumber('6')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    6
                  </button>
                  <button
                    x-on:click="addCashNumber('7')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    7
                  </button>
                  <button
                    x-on:click="addCashNumber('8')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    8
                  </button>
                  <button
                    x-on:click="addCashNumber('9')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    9
                  </button>
                  <button x-on:click="clearCashNumber()" class="rounded-md h-10 leading-10 bg-red-400 text-blue-gray-900 shadow hover:shadow-lg focus:outline-none">EFF</button>
                  <button
                    x-on:click="addCashNumber('0')"
                    class="rounded-md h-10 leading-10 bg-blue-gray-900 text-white text-xl font-bold shadow hover:shadow-lg hover:bg-blue-gray-50 hover:text-blue-gray-900 focus:outline-none"
                  >
                    0
                  </button>
                  <button x-on:click="deleteCashNumber()" class="rounded-md h-10 leading-10 bg-yellow-400 text-blue-gray-900 shadow hover:shadow-lg focus:outline-none">SUP</button>
                </div>
              </div>
              <div class="m-2 rounded-md w-auto bg-red-600 text-white text-center font-semibold py-2 px-2 h-40">
                <div class="text-xs">NET A PAYER</div>
                <div x-show="change > 0">
                  <div class="text-3xl -mt-1" x-text="priceFormat(change)"></div>
                </div>
                <div x-show="change == 0 && cart.length > 0" class="flex justify-center text-lg font-semibold text-cyan-700">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"
                    />
                  </svg>
                </div>
              </div>
              <button
                class="h-32 text-white text-center font-bold w-full py-3 focus:outline-none"
                x-bind:class="{ 'bg-green-400': submitable(), 'bg-blue-gray-100': !submitable() }"
                :disabled="!submitable()"
                x-on:click="submit()"
              >
                CONFIRMER
              </button>
            </div>
          </div>
        </div>
      </div>

      <template x-if="priceDemiModal">
        <div class="fixed glass w-full h-screen left-0 top-0 z-10 flex flex-wrap justify-center content-center p-24">
          <div class="w-96 p-8 bg-white shadow-xl relative">
            <div class="text-center mb-8">
              <h3 class="text-center text-2xl">Ajouter un produit</h3>
            </div>
            <div class="flex flex-row gap-2 mb-2">
              <button x-on:click="addToCartConfirmed(priceDemiProduct,'Complet')" class="text-left w-full mb-3 bg-green-400 text-white focus:outline-none hover:bg-cyan-400 px-4 py-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block -mt-1 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-2m-4-1v8m0 0l3-3m-3 3L9 8m-5 5h2.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293h3.172a1 1 0 00.707-.293l2.414-2.414a1 1 0 01.707-.293H20"
                  />
                </svg>
                Complet
              </button>
              <button x-on:click="addToCartConfirmed(priceDemiProduct,'Moitie')" class="text-left w-full mb-3 bg-yellow-400 text-white focus:outline-none hover:bg-cyan-400 px-4 py-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block -mt-1 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 4H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-2m-4-1v8m0 0l3-3m-3 3L9 8m-5 5h2.586a1 1 0 01.707.293l2.414 2.414a1 1 0 00.707.293h3.172a1 1 0 00.707-.293l2.414-2.414a1 1 0 01.707-.293H20"
                  />
                </svg>
                Moitié
              </button>
            </div>
          </div>
        </div>
      </template>

      <template x-if="isShowModalReceipt">
        <div class="fixed w-full h-screen left-0 top-0 z-10 flex flex-wrap justify-center content-center">
          <div class="fixed glass w-screen h-screen left-0 top-0 z-0" x-on:click="isShowModalReceipt = false"></div>
          <div class="w-2/4 p-4 h-screen z-10">
            <div id="receipt-content" class="flex flex-col text-left text-black w-full h-full text-sm p-4 overflow-y-auto bg-white">
              <div class="flex-1">
                <div class="text-center pb-2">
                  <svg
                    version="1.1"
                    id="Calque_1"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    x="0px"
                    y="0px"
                    viewBox="0 0 595.3 79.5"
                    style="enable-background: new 0 0 595.3 79.5"
                    xml:space="preserve"
                  >
                    <style type="text/css">
                      .st0 {
                        font-family: "ArialMT";
                      }
                      .st1 {
                        font-size: 12.4241px;
                      }
                    </style>
                    <text transform="matrix(1 0 0 1 39.6997 56.5675)">
                      <tspan x="0" y="0" class="st0 st1">Route de dande mayo, Ndouloumadji dembe • NINEA: 009040982 / RC: SNDBL 2021 A 4075</tspan>
                      <tspan x="96.1" y="14.9" class="st0 st1">GERANT: Mamoudou Niang - 77 352 39 87 / 76 158 42 12</tspan>
                    </text>
                    <g>
                      <path d="M17.2,2.2v7.8h-4.1v31.4H6.1V10.1H2V2.2H17.2z" />
                      <path
                        d="M34.6,25.2c0,3.9-0.1,6.7-0.2,8.4c-0.1,1.6-0.5,3.1-1.2,4.5c-0.7,1.4-1.6,2.4-2.7,3.1c-1.1,0.7-2.4,1.1-3.9,1.1                  c-1.4,0-2.7-0.3-3.8-1c-1.1-0.7-2-1.7-2.7-3.1c-0.7-1.4-1.1-2.9-1.2-4.5s-0.2-4.4-0.2-8.5v-6.7c0-3.9,0.1-6.7,0.2-8.4                  c0.1-1.6,0.5-3.1,1.2-4.5s1.6-2.4,2.7-3.1c1.1-0.7,2.4-1.1,3.9-1.1c1.4,0,2.7,0.3,3.8,1c1.1,0.7,2,1.7,2.7,3.1                  c0.7,1.4,1.1,2.9,1.2,4.5s0.2,4.4,0.2,8.5V25.2z M27.6,12.3c0-1.8-0.1-3-0.2-3.5c-0.1-0.5-0.4-0.8-0.8-0.8c-0.4,0-0.6,0.2-0.8,0.6                  c-0.2,0.4-0.3,1.6-0.3,3.6v18.3c0,2.3,0.1,3.7,0.2,4.2c0.1,0.5,0.4,0.8,0.9,0.8c0.5,0,0.8-0.3,0.9-0.9c0.1-0.6,0.2-2.1,0.2-4.4                  V12.3z"
                      />
                      <path
                        d="M52.9,2.2v26.2c0,3-0.1,5.1-0.2,6.3c-0.1,1.2-0.5,2.4-1.2,3.7c-0.6,1.3-1.5,2.2-2.6,2.9c-1.1,0.7-2.3,1-3.7,1                  c-1.6,0-3-0.4-4.2-1.2c-1.2-0.8-2.1-1.8-2.7-3c-0.6-1.2-1-2.6-1.1-3.9c-0.1-1.4-0.2-4.3-0.2-8.7V2.2H44v29.4c0,1.7,0.1,2.8,0.2,3.3                  c0.1,0.5,0.4,0.7,0.8,0.7c0.4,0,0.7-0.3,0.8-0.8c0.1-0.5,0.2-1.8,0.2-3.7V2.2H52.9z"
                      />
                      <path
                        d="M55.6,2.2h6.9c2.2,0,3.8,0.3,5,0.8c1.1,0.5,2,1.5,2.7,3c0.7,1.5,1,4,1,7.4c0,2.3-0.2,3.9-0.7,4.8c-0.5,0.9-1.4,1.6-2.9,2.1                  c1.6,0.5,2.7,1.4,3.3,2.7c0.6,1.2,0.9,3.1,0.9,5.7v3.6c0,2.6-0.2,4.6-0.6,5.9c-0.4,1.3-1.1,2.1-2,2.6c-0.9,0.5-2.7,0.7-5.5,0.7h-8                  V2.2z M62.5,9v8.7c0.3,0,0.5,0,0.7,0c0.7,0,1.1-0.2,1.3-0.7c0.2-0.5,0.3-1.9,0.3-4.2c0-1.2-0.1-2.1-0.2-2.6                  c-0.2-0.5-0.4-0.8-0.6-0.9C63.7,9,63.2,9,62.5,9z M62.5,23.8v11c1,0,1.6-0.3,1.9-0.7c0.3-0.4,0.4-1.4,0.4-3v-3.7                  c0-1.7-0.1-2.7-0.4-3.1C64.2,24,63.5,23.8,62.5,23.8z"
                      />
                      <path d="M86.1,2.2l4,39.2H83l-0.4-7h-2.5l-0.4,7h-7.2l3.5-39.2H86.1z M82.5,27.5c-0.4-4.4-0.7-9.9-1.1-16.5                  c-0.7,7.5-1.1,13-1.3,16.5H82.5z" />
                      <path
                        d="M97.2,2.2h5.2c3.3,0,5.6,0.2,6.8,0.7c1.2,0.5,2.1,1.2,2.7,2.2c0.6,1,1,2.2,1.2,3.5c0.2,1.3,0.2,3.8,0.2,7.5v13.7                  c0,3.5-0.1,5.9-0.3,7.1c-0.2,1.2-0.6,2.1-1.2,2.8c-0.6,0.7-1.2,1.1-2.1,1.4s-2.1,0.4-3.7,0.4h-8.7V2.2z M104.1,9v25.8                  c1,0,1.6-0.3,1.8-0.9c0.2-0.6,0.3-2.2,0.3-4.8V13.8c0-1.8,0-2.9-0.1-3.4c-0.1-0.5-0.3-0.9-0.5-1.1C105.4,9.1,104.9,9,104.1,9z"
                      />
                      <path d="M127.8,2.2l4,39.2h-7.1l-0.4-7h-2.5l-0.4,7h-7.2l3.5-39.2H127.8z M124.1,27.5c-0.4-4.4-0.7-9.9-1.1-16.5                  c-0.7,7.5-1.1,13-1.3,16.5H124.1z" />
                      <path
                        d="M132.9,2.2h4.9c3.3,0,5.5,0.2,6.6,0.6c1.2,0.4,2.1,1.3,2.8,2.8c0.7,1.5,1.1,4,1.1,7.3c0,3.1-0.3,5.1-0.8,6.1                  c-0.5,1-1.5,1.7-3,1.9c1.4,0.5,2.3,1.2,2.8,2c0.5,0.8,0.8,1.6,0.9,2.3c0.1,0.7,0.2,2.6,0.2,5.8v10.3h-6.4v-13                  c0-2.1-0.1-3.4-0.3-3.9c-0.2-0.5-0.8-0.8-1.8-0.8v17.7h-6.9V2.2z M139.8,9v8.7c0.8,0,1.3-0.2,1.6-0.5c0.3-0.3,0.5-1.3,0.5-3.1V12                  c0-1.2-0.2-2.1-0.5-2.4C141.2,9.1,140.6,9,139.8,9z"
                      />
                      <path
                        d="M166.9,25.2c0,3.9-0.1,6.7-0.2,8.4c-0.1,1.6-0.5,3.1-1.2,4.5c-0.7,1.4-1.6,2.4-2.7,3.1c-1.1,0.7-2.4,1.1-3.9,1.1                  c-1.4,0-2.7-0.3-3.8-1c-1.1-0.7-2-1.7-2.7-3.1s-1.1-2.9-1.2-4.5s-0.2-4.4-0.2-8.5v-6.7c0-3.9,0.1-6.7,0.2-8.4                  c0.1-1.6,0.5-3.1,1.2-4.5s1.6-2.4,2.7-3.1c1.1-0.7,2.4-1.1,3.9-1.1c1.4,0,2.7,0.3,3.8,1c1.1,0.7,2,1.7,2.7,3.1s1.1,2.9,1.2,4.5                  s0.2,4.4,0.2,8.5V25.2z M159.9,12.3c0-1.8-0.1-3-0.2-3.5c-0.1-0.5-0.4-0.8-0.8-0.8c-0.4,0-0.6,0.2-0.8,0.6                  c-0.2,0.4-0.3,1.6-0.3,3.6v18.3c0,2.3,0.1,3.7,0.2,4.2c0.1,0.5,0.4,0.8,0.9,0.8c0.5,0,0.8-0.3,0.9-0.9c0.1-0.6,0.2-2.1,0.2-4.4                  V12.3z"
                      />
                      <path
                        d="M185.2,2.2v26.2c0,3-0.1,5.1-0.2,6.3c-0.1,1.2-0.5,2.4-1.2,3.7c-0.6,1.3-1.5,2.2-2.6,2.9c-1.1,0.7-2.3,1-3.7,1                  c-1.6,0-3-0.4-4.2-1.2c-1.2-0.8-2.1-1.8-2.7-3c-0.6-1.2-1-2.6-1.1-3.9c-0.1-1.4-0.2-4.3-0.2-8.7V2.2h6.9v29.4                  c0,1.7,0.1,2.8,0.2,3.3c0.1,0.5,0.4,0.7,0.8,0.7c0.4,0,0.7-0.3,0.8-0.8c0.1-0.5,0.2-1.8,0.2-3.7V2.2H185.2z"
                      />
                      <path
                        d="M208.5,14.1H202v-2.9c0-1.4-0.1-2.2-0.2-2.6c-0.2-0.4-0.4-0.6-0.8-0.6c-0.4,0-0.7,0.3-0.9,0.8c-0.2,0.5-0.3,1.3-0.3,2.3                  c0,1.3,0.1,2.3,0.4,3c0.2,0.7,0.9,1.5,2,2.4c3.1,2.7,5,4.9,5.8,6.6c0.8,1.7,1.2,4.5,1.2,8.4c0,2.8-0.2,4.9-0.7,6.2                  c-0.4,1.3-1.3,2.4-2.6,3.3c-1.3,0.9-2.8,1.3-4.4,1.3c-1.9,0-3.4-0.5-4.7-1.5c-1.3-1-2.2-2.3-2.6-3.9c-0.4-1.6-0.6-3.9-0.6-6.8v-2.6                  h6.4v4.8c0,1.5,0.1,2.4,0.3,2.8c0.2,0.4,0.5,0.6,1,0.6c0.5,0,0.8-0.3,1-0.8c0.2-0.5,0.3-1.3,0.3-2.4c0-2.3-0.2-3.8-0.6-4.5                  c-0.4-0.7-1.5-1.9-3.2-3.6c-1.7-1.7-2.9-2.9-3.4-3.7c-0.6-0.8-1-1.8-1.4-3.1c-0.4-1.3-0.6-3.1-0.6-5.1c0-3,0.3-5.2,0.8-6.6                  c0.5-1.4,1.4-2.5,2.5-3.3c1.2-0.8,2.6-1.2,4.2-1.2c1.8,0,3.3,0.4,4.6,1.3c1.3,0.9,2.1,1.9,2.5,3.2c0.4,1.3,0.6,3.5,0.6,6.6V14.1z"
                      />
                      <path d="M223.2,2.2l4,39.2h-7.1l-0.4-7h-2.5l-0.4,7h-7.2l3.5-39.2H223.2z M219.5,27.5c-0.4-4.4-0.7-9.9-1.1-16.5                  c-0.7,7.5-1.1,13-1.3,16.5H219.5z" />
                      <path d="M235.2,2.2v31.4h4.2v7.8h-11.1V2.2H235.2z" />
                      <path d="M253.9,2.2l4,39.2h-7.1l-0.4-7H248l-0.4,7h-7.2l3.5-39.2H253.9z M250.2,27.5c-0.4-4.4-0.7-9.9-1.1-16.5                  c-0.7,7.5-1.1,13-1.3,16.5H250.2z" />
                      <path d="M280.4,2.2v39.2h-6.1l0-26.5l-2.4,26.5h-4.3l-2.5-25.9l0,25.9H259V2.2h9c0.3,2.4,0.5,5.1,0.8,8.3l1,10l1.6-18.3H280.4z" />
                      <path d="M301.1,2.2l4,39.2H298l-0.4-7h-2.5l-0.4,7h-7.2l3.5-39.2H301.1z M297.4,27.5c-0.4-4.4-0.7-9.9-1.1-16.5                  c-0.7,7.5-1.1,13-1.3,16.5H297.4z" />
                      <path d="M313.1,2.2v31.4h4.2v7.8h-11.1V2.2H313.1z" />
                      <path d="M326,2.2v39.2H319V2.2H326z" />
                      <path d="M350.1,2.2v39.2H344l0-26.5l-2.4,26.5h-4.3l-2.5-25.9l0,25.9h-6.1V2.2h9c0.3,2.4,0.5,5.1,0.8,8.3l1,10l1.6-18.3H350.1z" />
                      <path d="M352.9,2.2h11.5v7.8h-4.6v7.4h4.3V25h-4.3v8.6h5.1v7.8h-12V2.2z" />
                      <path d="M382.3,2.2v39.2h-6.1l-3.6-17.8v17.8h-5.8V2.2h5.8l3.9,17.6V2.2H382.3z" />
                      <path d="M399,2.2v7.8h-4.1v31.4H388V10.1h-4.1V2.2H399z" />
                      <path d="M411.2,2.2l4,39.2h-7.1l-0.4-7h-2.5l-0.4,7h-7.2l3.5-39.2H411.2z M407.6,27.5c-0.4-4.4-0.7-9.9-1.1-16.5                  c-0.7,7.5-1.1,13-1.3,16.5H407.6z" />
                      <path d="M428.4,2.2v7.8h-4.1v31.4h-6.9V10.1h-4.1V2.2H428.4z" />
                      <path d="M436.9,2.2v39.2H430V2.2H436.9z" />
                      <path
                        d="M455.5,25.2c0,3.9-0.1,6.7-0.2,8.4c-0.1,1.6-0.5,3.1-1.2,4.5c-0.7,1.4-1.6,2.4-2.7,3.1c-1.1,0.7-2.4,1.1-3.9,1.1                  c-1.4,0-2.7-0.3-3.8-1c-1.1-0.7-2-1.7-2.7-3.1c-0.7-1.4-1.1-2.9-1.2-4.5s-0.2-4.4-0.2-8.5v-6.7c0-3.9,0.1-6.7,0.2-8.4                  c0.1-1.6,0.5-3.1,1.2-4.5s1.6-2.4,2.7-3.1c1.1-0.7,2.4-1.1,3.9-1.1c1.4,0,2.7,0.3,3.8,1c1.1,0.7,2,1.7,2.7,3.1                  c0.7,1.4,1.1,2.9,1.2,4.5s0.2,4.4,0.2,8.5V25.2z M448.6,12.3c0-1.8-0.1-3-0.2-3.5c-0.1-0.5-0.4-0.8-0.8-0.8c-0.4,0-0.6,0.2-0.8,0.6                  c-0.2,0.4-0.3,1.6-0.3,3.6v18.3c0,2.3,0.1,3.7,0.2,4.2c0.1,0.5,0.4,0.8,0.9,0.8c0.5,0,0.8-0.3,0.9-0.9c0.1-0.6,0.2-2.1,0.2-4.4                  V12.3z"
                      />
                      <path d="M473.6,2.2v39.2h-6.1l-3.6-17.8v17.8h-5.8V2.2h5.8l3.9,17.6V2.2H473.6z" />
                      <path
                        d="M498.2,16.7h-6.9v-3.6c0-2.2-0.1-3.6-0.2-4.2c-0.1-0.6-0.4-0.8-0.9-0.8c-0.4,0-0.7,0.2-0.9,0.7c-0.2,0.5-0.2,1.7-0.2,3.7                  v18.8c0,1.8,0.1,2.9,0.2,3.5c0.2,0.6,0.5,0.8,0.9,0.8c0.5,0,0.8-0.3,1-0.9c0.2-0.6,0.3-1.9,0.3-3.7v-4.6h-1.4v-6h8.1v21h-4.3                  l-0.6-2.8c-0.5,1.2-1.1,2.1-1.8,2.7c-0.7,0.6-1.6,0.9-2.5,0.9c-1.2,0-2.3-0.4-3.3-1.2c-1-0.8-1.8-1.9-2.3-3.1                  c-0.5-1.2-0.9-2.5-1-3.9c-0.1-1.3-0.2-3.4-0.2-6.1V16.4c0-3.7,0.1-6.5,0.4-8.2c0.3-1.7,1.1-3.2,2.4-4.7s3-2.1,5-2.1                  c2,0,3.7,0.6,5,1.8c1.3,1.2,2.2,2.7,2.6,4.4c0.4,1.7,0.6,4.1,0.6,7.3V16.7z"
                      />
                      <path d="M500.9,2.2h11.5v7.8h-4.6v7.4h4.3V25h-4.3v8.6h5.1v7.8h-12V2.2z" />
                      <path d="M530.3,2.2v39.2h-6.1l-3.6-17.8v17.8h-5.8V2.2h5.8l3.9,17.6V2.2H530.3z" />
                      <path d="M533.1,2.2h11.5v7.8H540v7.4h4.3V25H540v8.6h5.1v7.8h-12V2.2z" />
                      <path
                        d="M547.1,2.2h4.9c3.3,0,5.5,0.2,6.6,0.6c1.2,0.4,2.1,1.3,2.8,2.8c0.7,1.5,1.1,4,1.1,7.3c0,3.1-0.3,5.1-0.8,6.1                  c-0.5,1-1.5,1.7-3,1.9c1.4,0.5,2.3,1.2,2.8,2c0.5,0.8,0.8,1.6,0.9,2.3c0.1,0.7,0.2,2.6,0.2,5.8v10.3h-6.4v-13                  c0-2.1-0.1-3.4-0.3-3.9c-0.2-0.5-0.8-0.8-1.8-0.8v17.7h-6.9V2.2z M554,9v8.7c0.8,0,1.3-0.2,1.6-0.5c0.3-0.3,0.5-1.3,0.5-3.1V12                  c0-1.2-0.2-2.1-0.5-2.4C555.3,9.1,554.8,9,554,9z"
                      />
                      <path d="M577.2,2.2l4,39.2h-7.1l-0.4-7h-2.5l-0.4,7h-7.2l3.5-39.2H577.2z M573.5,27.5c-0.4-4.4-0.7-9.9-1.1-16.5                  c-0.7,7.5-1.1,13-1.3,16.5H573.5z" />
                      <path d="M589.2,2.2v31.4h4.2v7.8h-11.1V2.2H589.2z" />
                    </g>
                  </svg>
                </div>
                <div class="flex py-2 text-xs px-2">
                  <div class="flex-1 text-left border border-black pl-2 py-2 w-60 flex flex-row">
                    <p class="mr-10">Client:</p>
                    <div x-show="clientCart.length > 0">
                      <template x-for="(item, index) in clientCart" :key="item.Nom">
                        <div class="">
                          <p class="text-xs ml-1" x-text="item.Prenom+' '+item.Nom"></p>
                          <p class="text-xs ml-1" x-text="item.Telephone"></p>
                          <p class="text-xs ml-1" x-text="item.Adresse"></p>
                        </div>
                      </template>
                    </div>
                  </div>
                  <div class="text-right ml-10">
                    <div class="text-xl font-bold">FACTURE</div>
                    <p>
                      <span>N° </span>
                      <span x-text="receiptNo"></span>
                    </p>
                    <span x-text="receiptDate"></span>
                  </div>
                </div>
              </div>
              <div class="mx-2 shrink-0 h-full border border-black">
                <table class="w-full text-xs px-2">
                  <thead class="text-black px-2">
                    <tr class="">
                      <th class="py-1 px-2 border border-t-0 border-l-0 border-black w-2/12 text-center">Qté</th>
                      <th class="py-1 px-2 border border-t-0 border-black text-left">Désignation</th>
                      <th class="py-1 px-2 border border-t-0 border-black text-left">P.Unit</th>
                      <th class="py-1 px-2 border border-t-0 border-r-0 border-black w-3/12 text-right">S.Total</th>
                    </tr>
                  </thead>
                  <tbody>
                    <template x-for="(item, index) in cart" :key="item">
                      <tr class="border border-black">
                        <td class="py-1 px-1 text-center border border-gray" x-text="item.qty"></td>
                        <td class="py-1 px-1 text-left border border-gray" x-text="item.name"></td>
                        <td class="py-1 px-1 text-left border border-gray" x-text="priceFormat(item.price)"></td>
                        <td class="py-1 px-1 text-right border border-gray" x-text="priceFormat(item.qty * item.price)"></td>
                      </tr>
                    </template>
                  </tbody>
                </table>
              </div>
              <div class="flex-1 w-auto h-auto border text-left border-black mt-4 px-2 py-2 ml-auto mr-2 mb-3">
                <div class="flex text-xs font-bold">
                  <div class="flex-grow mr-2">TOTAL</div>
                  <div x-text="priceFormat(getTotalPrice())"></div>
                </div>
                <div class="flex text-xs font-semibold">
                  <div class="flex-grow mr-2">ACCOMPTE</div>
                  <div x-text="priceFormat(cash)"></div>
                </div>
                <hr class="my-2" />
                <div class="flex font-semibold items-center">
                  <div class="flex-grow mr-2">NET A PAYER</div>
                  <div class="text-xl" x-text="priceFormat(change)"></div>
                </div>
              </div>
              <hr class="my-2" />
            </div>
            <button class="fixed bottom-4 bg-red-500 text-white text-lg px-4 py-3 focus:outline-none" x-on:click="printAndProceed()">IMPRIMER</button>
          </div>
        </div>
      </template>

      <div class="z-40 fixed inset-0 flex flex-col-reverse items-end justify-start h-screen w-screen" @notice.window="add($event.detail)" style="pointer-events: none">
        <template x-for="notice of notices" :key="notice.id">
          <div
            x-show="visible.includes(notice)"
            x-transition:enter="transition ease-in duration-200"
            x-transition:enter-start="transform opacity-0 translate-y-2"
            x-transition:enter-end="transform opacity-100"
            x-transition:leave="transition ease-out duration-500"
            x-transition:leave-start="transform translate-x-0 opacity-100"
            x-transition:leave-end="transform translate-x-full opacity-0"
            @click="remove(notice.id)"
            class="rounded-md mb-4 mr-6 w-56 p-3 flex items-center justify-center text-white shadow-lg font-bold text-xs cursor-pointer"
            :class="{
            'bg-green-500': notice.type === 'success',
            'bg-blue-500': notice.type === 'info',
            'bg-orange-500': notice.type === 'warning',
            'bg-red-500': notice.type === 'error',
          }"
            style="pointer-events: all"
            x-text="notice.text"
          ></div>
        </template>
      </div>
    </div>
    <div id="print-area" class="print-area text-center text-xs"></div>
  </body>
</html>
